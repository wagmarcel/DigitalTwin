@prefix : <https://volkswagen.org/vass/v0.9/root#> .
@prefix default1: <https://volkswagen.org/vass/v0.9/usecase#> .
@prefix ontology: <https://volkswagen.org/vass/v0.9/ontology#> .
@prefix owl: <http://www.w3.org/2002/07/owl#> .
@prefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .
@prefix xsd: <http://www.w3.org/2001/XMLSchema#> .

ontology:CarDoorProcess a rdfs:Class,
        ontology:Process ;
    rdfs:subClassOf ontology:Process .

ontology:CarRoofProcess a rdfs:Class,
        ontology:Process ;
    rdfs:subClassOf ontology:Process .

ontology:Datatype a rdfs:Class ;
    rdfs:subClassOf rdfs:Class .

ontology:HWAddress a rdfs:Class .

ontology:Mapping a rdfs:Class ;
    rdfs:subClassOf rdfs:Class .

ontology:Part a rdfs:Class ;
    rdfs:subClassOf rdfs:Class .

ontology:Process a rdfs:Class ;
    rdfs:subClassOf rdfs:Class .

ontology:ProcessStep a rdfs:Class ;
    rdfs:subClassOf rdfs:Class .

ontology:Retrievable a rdfs:Class ;
    rdfs:subClassOf rdfs:Class .

default1:Part a rdfs:Class .

default1:Process a rdfs:Class .

ontology:appliedInProcess a rdf:Property ;
    rdfs:domain ontology:ProcessStep ;
    rdfs:range ontology:Process .

ontology:carDoor a ontology:Part .

ontology:carRoof a ontology:Part .

ontology:fieldName a rdf:Property .

ontology:getParams a rdf:Property ;
    rdfs:domain ontology:Mapping ;
    rdfs:range xsd:string .

ontology:getValues a rdf:Property ;
    rdfs:domain ontology:Mapping ;
    rdfs:range xsd:string .

ontology:hasDataType a rdf:Property ;
    rdfs:range rdfs:Datatype .

ontology:hasOrderNumber a rdf:Property ;
    rdfs:domain ontology:ProcessStep ;
    rdfs:range xsd:string .

ontology:hasVarName a rdf:Property ;
    rdfs:domain ontology:HWAddress ;
    rdfs:range xsd:string .

ontology:mapAttribute a rdf:Property ;
    rdfs:domain ontology:Mapping ;
    rdfs:range rdf:Property .

ontology:mapClass a rdf:Property ;
    rdfs:domain ontology:Mapping ;
    rdfs:range rdfs:Class .

ontology:mapRule a rdf:Property ;
    rdfs:range xsd:string .

ontology:processStep1 a ontology:ProcessStep,
        ontology:Retrievable ;
    ontology:appliedInProcess ontology:CarDoorProcess,
        ontology:CarRoofProcess ;
    ontology:hasOrderNumber "1" ;
    ontology:retrievedBy :processStep1Address .

ontology:processStep2 a ontology:ProcessStep,
        ontology:Retrievable ;
    ontology:appliedInProcess ontology:CarDoorProcess ;
    ontology:hasOrderNumber "2" ;
    ontology:retrievedBy :processStep2Address .

ontology:processStepUndefined a ontology:ProcessStep ;
    ontology:hasOrderNumber "0" .

ontology:retrievedBy a rdf:Property ;
    rdfs:domain ontology:Retrievable ;
    rdfs:range rdfs:Resource .

<https://volkswagen.org/vass/v0.9/root> a owl:Ontology ;
    owl:imports <https://volkswagen.org/vass/v0.9/ontology> ;
    owl:versionInfo "Created with TopBraid Composer" .

<https://volkswagen.org/vass/v0.9/usecase> a owl:Ontology ;
    owl:imports <https://volkswagen.org/vass/v0.9/ontology> ;
    owl:versionInfo "Created with TopBraid Composer" .

default1:hasOutput a rdf:Property ;
    rdfs:domain default1:Process ;
    rdfs:range default1:Part .

default1:hasPartType a rdf:Property ;
    rdfs:domain default1:Part ;
    rdfs:range ontology:Part .

default1:hasSerialNumber a rdf:Property ;
    rdfs:domain default1:Part ;
    rdfs:range xsd:string .

default1:hasStateMapping a ontology:Mapping ;
    ontology:getParams """SELECT distinct ?hasVarName ?hasDataType\r
WHERE {\r
	?processes rdfs:subClassOf* ontology:Process . \r
    ?steps ontology:appliedInProcess  ?processes .\r
    ?steps ontology:retrievedBy ?addr .\r
    ?addr ontology:hasVarName ?hasVarName .  \r
    ?addr ontology:hasDataType ?hasDataType .\r
}""" ;
    ontology:getValues """SELECT distinct ?value\r
WHERE {\r
    BIND(IF(?varname1 = true && ?varname2 = false, ontology:processStep1, \r
			   IF(?varname2 = true && ?varname1 = false, ontology:processStep2, \r
                   ontology:processStepUndefined) # else\r
     ) AS ?value)\r
}""" ;
    ontology:mapAttribute default1:hasState ;
    ontology:mapClass default1:Process .

default1:hasStateNumericalMapping a ontology:Mapping ;
    ontology:getParams """SELECT distinct ?hasVarName ?hasDataType\r
WHERE {\r
	?processes rdfs:subClassOf* ontology:Process . \r
    ?steps ontology:appliedInProcess  ?processes .\r
    ?steps ontology:retrievedBy ?addr .\r
    ?addr ontology:hasVarName ?hasVarName .  \r
    ?addr ontology:hasDataType ?hasDataType .\r
}""" ;
    ontology:getValues """SELECT distinct ?value\r
WHERE {\r
    OPTIONAL{ontology:processStep1 ontology:hasOrderNumber ?ord1 .}\r
    OPTIONAL{ontology:processStep2 ontology:hasOrderNumber ?ord2 .}\r
    OPTIONAL{ontology:processStepUndefined ontology:hasOrderNumber ?ord0 .}\r
    BIND(IF(?varname1 = true && ?varname2 = false,  1, \r
			   IF(?varname2 = true && ?varname1 = false, ?ord2, \r
                   ?ord0) # else\r
     ) AS ?value)\r
}""" ;
    ontology:mapAttribute default1:hasNumericalState ;
    ontology:mapClass default1:Process .

:processStep1Address a ontology:HWAddress ;
    ontology:hasDataType xsd:boolean ;
    ontology:hasVarName "varname1" .

:processStep2Address a ontology:HWAddress ;
    ontology:hasDataType xsd:boolean ;
    ontology:hasVarName "varname2" .

default1:hasNumericalState a rdf:Property ;
    rdfs:domain default1:Process ;
    rdfs:range xsd:integer .

default1:hasState a rdf:Property ;
    rdfs:domain default1:Process ;
    rdfs:range ontology:ProcessStep .

<https://volkswagen.org/vass/v0.9/ontology> a owl:Ontology ;
    owl:imports <http://www.w3.org/ns/shacl#> ;
    owl:versionInfo "Created with TopBraid Composer" .

